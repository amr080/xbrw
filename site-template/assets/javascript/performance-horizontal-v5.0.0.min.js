function buildPerformanceTables(e,a,r,t){var n,o,i,c,d,f,p,l,s,m,u;"DailyPerformance/"==t?(l=$("#performanceTableWrapper [data-action='performance--daily']").not("#performanceTableWrapper [data-action] [data-action]"),m=$("#performanceTableWrapper_daily [data-asofdate]")):(l=$("#performanceTableWrapper [data-action='performance--monthly']").add("#performanceTableWrapper [data-action='performance--quarterly']").add("#performanceTableWrapper [data-action='performance--monthly-shared']").not("#performanceTableWrapper [data-action] [data-action]"),m=$("#performanceTableWrapper_monthly [data-asofdate]").add("#performanceTableWrapper_quarterly [data-asofdate]").add("#performanceTableWrapper [data-asofdate]").not("#performanceTableWrapper_daily [data-asofdate]")),$.each(m,function(a,r){$(r).append(dateFormatter_v2(e[0][0][$(r).data("asofdate")]))}),$.each(l,function(t,l){o=$(this).data(),i=$(this).attr("id"),u=getInceptionArray(e),c="#"+i+'[data-action="'+o.action+'"]',verifyData(o.overrideresource)&&(r=getMapInfo("performance_map",o.overrideresource)),d=-1!=o.action.indexOf("shared")?performance_map.performancePeriodMap[o.action][r[0].display_name]:performance_map.performancePeriodMap[o.action],1==o.autoanniversaries&&(d=filterPerformanceObject(a,d,u)),f=$(c+' [data-resource-display="0"]').closest("tr");for(var m=1;m<r.length;m++)$(f).clone().appendTo(c).find("[data-resource-display]").attr("data-resource-display",m).closest("tr").attr("data-performance-name",r[m].performance_name).attr("data-definition",r[m].definition).find("[data-key]").attr("data-key",m);$.each(r,function(e,a){$(c+' [data-resource-display="'+e+'"]').html(a.display_name),$(c+' [data-resource-display="'+e+'"]').parent().attr("data-resource-target",a.display_name).attr("data-symbol",a.symbol),window.headerColspan=Object.size(d)+f.children().length}),s=$(c+" [data-key]").not(c+" [data-action][data-key]").not(c+" [data-action] [data-key]"),$(s).each(function(e,t){var i,f=0;if(-1!=o.action.indexOf("shared")){var l=$(t).parent("[data-resource-target]").data("resourceTarget");d=periodObjectByResource(a,l,o,d,u)}for(var s in d)p=$(c+" [data-clone='true'][data-key='"+$(this).data("key")+"']"),f>0?(n=$(c+' [data-key="'+$(this).data("key")+'"][data-position="'+(f-1)+'"][data-period-target="'+i+'"]'),$(p).clone().attr("data-position",f).attr("data-clone","false").attr("data-period-target",s).insertAfter(n)):($(p).attr("data-position",f).attr("data-period-target",s),$('[data-resource-display="'+f+'"]').closest("tr").attr("data-performance-name",r[f].performance_name)),$(c+" [data-position='"+f+"'][data-key='period']").html(d[s]),i=s,f++;$(c+' [data-performance-name="Header"]').addClass("header-row").find("td:gt(0)").remove(),$(c+' [data-performance-name="Header"]').find("td").attr("colspan",window.headerColspan)});for(var y=0;y<r.length;y++)for(var w in-1!=o.action.indexOf("shared")&&(d=periodObjectByResource(a,r[y].display_name,o,d,u)),d)for(m=0;m<e.length;m++)for(var h=0;h<e[m].length;h++)(e[m][h].performance_name==r[y].performance_name&&e[m][h].resource_name==r[y].resource_name&&e[m][h].symbol==r[y].symbol&&e[m][h].definition==r[y].definition||e[m][h].performance_name==r[y].performance_name&&e[m][h].resource_name==r[y].resource_name&&e[m][h].symbol==r[y].symbol&&!r[y].definition)&&(r[y].definition?$(c+" [data-resource-target='"+r[y].display_name+"'][data-definition='"+r[y].definition+"'] [data-period-target='"+w+"']").html(verifyPerformanceValue(e[m][h][w],w,e[m],e[m][h],o)):$(c+" [data-resource-target='"+r[y].display_name+"'] [data-period-target='"+w+"']").html(verifyPerformanceValue(e[m][h][w],w,e[m],e[m][h],o)))}),"undefined"!=typeof performanceDataComplete&&$.isFunction(performanceDataComplete)&&performanceDataComplete(a),checkAllTableOverflows()}function getInceptionArray(e){for(var a=[],r=0;r<e.length;r++)a[e[r][0].symbol]=e[r][0].inceptiondate;return a}function inceptionVsCurrent(e,a){var r;r=$.isArray(e)?e[a]:e;var t=new Date(r),n=new Date,o=t.getFullYear(),i=n.getFullYear(),c=new Date(t).setFullYear(2e3),d=new Date(n).setFullYear(2e3);return[o,i,c,d]}function getSIValue(e,a,r,t){if(value=a[r],1==t.autosiswitch){var n=e[0].inceptiondate,o=inceptionVsCurrent(n);if(o[1]-o[0]<1||o[1]-o[0]==1&&o[3]<o[2])switch(r){case"qsiann":value=a.qsicum;break;default:value=a.sicum}}return value}function filterPerformanceObject(e,a,r){var t=inceptionVsCurrent(r,e[0]),n=Object.filter(a,function(e){if(t[1]-t[0]>importantAnniversaries[e]||t[1]-t[0]==importantAnniversaries[e]&&t[3]>t[2]||null==importantAnniversaries[e])return!0},"key");return n}function verifyPerformanceValue(e,a,r,t,n){return"qsiann"!=a&&"siann"!=a||(e=getSIValue(r,t,a,n)),null==e||null==e?"-":Number(precisionRound(100*e,2)).toLocaleString("en-US",{minimumFractionDigits:2})+"%"}function allDatesMatchCheck(e){for(var a=1,r=e[0],t=0;t<e.length-1;t++){if(r!=e[t+1]){a=0;break}r=e[t]}return a}function periodObjectByResource(e,a,r,t,n){return a&&(t=performance_map.performancePeriodMap[r.action][a]),1==r.autoanniversaries&&(t=filterPerformanceObject(e,t,n)),t}function getAllPerformance(e,a){function r(e){return window.combinedResourceArray[o].push(e),window.allResourceArray[o]=[].concat.apply([],window.combinedResourceArray[o]),window.allResourceArray[o]}var t,n,o;a&&a.resourceMap&&(t=a.resourceMap),n=a&&a.resourceFilter?a.resourceFilter:"",o=a&&a.endpoint?a.endpoint:"Performance/",window.performanceDateQueue[o]=[],window.allPerformance[o]=[],window.combinedResourceArray[o]=[],window.tickerLengthPerf[o]=0,verifyData(t)?thisPerfMapPosition[o]=getMapInfo("performance_map",t):thisPerfMapPosition[o]=getMapInfo("performance_map",e[0]),window.allResourceArray[o]=r(thisPerfMapPosition[o]),window.tickerLengthPerf[o]=e.length,$.each(e,function(a,r){var t=api_url_v2+o+r+"/"+n;api.getData(t,o+r,function(a){verifyData(a)?(window.performanceDateQueue[o].push(a[0].asofdate),window.allPerformance[o].push(a)):$("#performanceTableWrapper").html("There is no performance data at this time"),window.tickerLengthPerf[o]--,0==window.tickerLengthPerf[o]&&verifyData(window.allPerformance[o])&&(allDatesMatchCheck(window.performanceDateQueue[o])?buildPerformanceTables(window.allPerformance[o],e,window.allResourceArray[o],o):(console.log("Dates Dont Match - Hiding all rows"),$("#performanceTableWrapper").html("There is no performance data at this time")))})})}window.performanceDateQueue={},window.allPerformance={},window.combinedResourceArray={},window.allResourceArray={},window.thisPerfMapPosition={},window.tickerLengthPerf={};var importantAnniversaries={oneyr:1,threeyrcum:3,threeyrann:3,fiveyrcum:5,fiveyrann:5,tenyrcum:10,tenyrann:10,fifteenyrcum:15,fifteenyrann:15,twentyyrcum:20,twentyyrann:20,qoneyr:1,qthreeyrcum:3,qthreeyrann:3,qfiveyrcum:5,qfiveyrann:5,qtenyrcum:10,qtenyrann:10,qfifteenyrcum:15,qfifteenyrann:15,qtwentyyrcum:20,qtwentyyrann:20};